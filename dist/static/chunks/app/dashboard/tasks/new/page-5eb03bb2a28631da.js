(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[673],{4416:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5405:(e,s,r)=>{Promise.resolve().then(r.bind(r,9165))},9165:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>b});var t=r(5155),l=r(2115),a=r(5196),i=r(9074),n=r(4416),d=r(183),c=r(7881),o=r(6409),h=r(7075),u=r(4765),x=r(9182),m=r(3879),j=r(60),g=r(1965),p=r(7503),y=r(1731),v=r(3464);function b(){let[e,s]=(0,l.useState)(!1),[r,b]=(0,l.useState)({title:"",description:"",status:"todo",priority:"medium",dueDate:null,assignedTo:"",recurringType:"none",recurringEndDate:null}),[N,f]=(0,l.useState)([]),[T,k]=(0,l.useState)(""),[w,D]=(0,l.useState)(!1),[C,S]=(0,l.useState)({}),[E,F]=(0,l.useState)(""),[A,J]=(0,l.useState)([]);(0,l.useEffect)(()=>{!async function(){let e=localStorage.getItem("token"),s=await v.A.get("http://localhost:5000/api/users",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});s.data?J(s.data.users):console.error("Failed to fetch users:",result.message)}()},[]),console.log(A);let P=e=>{let{name:s,value:r}=e.target;b(e=>({...e,[s]:r})),C[s]&&S(e=>{let r={...e};return delete r[s],r})},_=(e,s)=>{b(r=>({...r,[e]:s})),C[e]&&S(s=>{let r={...s};return delete r[e],r})},V=(e,s)=>{b(r=>({...r,[e]:s}))},q=()=>{T.trim()&&!N.includes(T.trim())&&(f([...N,T.trim()]),k(""))},I=e=>{f(N.filter(s=>s!==e))},M=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"",O=()=>{let e={};return r.title.trim()||(e.title="Title is required"),w&&!r.recurringType&&(e.recurringType="Please select a recurrence pattern"),S(e),0===Object.keys(e).length},$=async e=>{if(e.preventDefault(),O()){s(!0),F("");try{let e={...r,tags:N,isRecurring:w};w||(e.recurringType="none",e.recurringEndDate=null);let s=localStorage.getItem("token"),t=await fetch("http://localhost:5000/api/tasks",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(e)}),l=await t.json();if(!t.ok)throw Error(l.message||"Failed to create task");b({title:"",description:"",status:"todo",priority:"medium",dueDate:null,assignedTo:"",recurringType:"none",recurringEndDate:null}),f([]),D(!1),F("Task created successfully!")}catch(e){S({submit:e.message})}finally{s(!1)}}};return(0,t.jsxs)(u.Zp,{className:"w-full max-w-3xl mx-auto",children:[(0,t.jsxs)(u.aR,{children:[(0,t.jsx)(u.ZB,{className:"text-2xl font-bold",children:"Create New Task"}),(0,t.jsx)(u.BT,{children:"Add a new task to your list"})]}),(0,t.jsxs)(u.Wu,{children:[E&&(0,t.jsxs)(p.Fc,{className:"mb-6 bg-green-50 border-green-200",children:[(0,t.jsx)(a.A,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)(p.TN,{className:"text-green-600",children:E})]}),C.submit&&(0,t.jsx)(p.Fc,{className:"mb-6 bg-red-50 border-red-200",children:(0,t.jsx)(p.TN,{className:"text-red-600",children:C.submit})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(y.J,{htmlFor:"title",className:C.title?"text-red-500":"",children:["Title ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(c.p,{id:"title",name:"title",value:r.title,onChange:P,placeholder:"Task title",className:C.title?"border-red-500":""}),C.title&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:C.title})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(y.J,{htmlFor:"description",children:"Description"}),(0,t.jsx)(o.T,{id:"description",name:"description",value:r.description,onChange:P,placeholder:"Describe the task",className:"min-h-32"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(y.J,{htmlFor:"status",children:"Status"}),(0,t.jsxs)(h.l6,{value:r.status,onValueChange:e=>_("status",e),children:[(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Select status"})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"todo",children:"To Do"}),(0,t.jsx)(h.eb,{value:"in-progress",children:"In Progress"}),(0,t.jsx)(h.eb,{value:"review",children:"Review"}),(0,t.jsx)(h.eb,{value:"completed",children:"Completed"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(y.J,{htmlFor:"priority",children:"Priority"}),(0,t.jsxs)(h.l6,{value:r.priority,onValueChange:e=>_("priority",e),children:[(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Select priority"})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"low",children:"Low"}),(0,t.jsx)(h.eb,{value:"medium",children:"Medium"}),(0,t.jsx)(h.eb,{value:"high",children:"High"}),(0,t.jsx)(h.eb,{value:"urgent",children:"Urgent"})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(y.J,{htmlFor:"dueDate",children:"Due Date"}),(0,t.jsxs)(x.AM,{children:[(0,t.jsx)(x.Wv,{asChild:!0,children:(0,t.jsxs)(d.$,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[(0,t.jsx)(i.A,{className:"mr-2 h-4 w-4"}),r.dueDate?M(r.dueDate):(0,t.jsx)("span",{className:"text-gray-400",children:"Pick a date"})]})}),(0,t.jsx)(x.hl,{className:"w-auto p-0",children:(0,t.jsx)(g.V,{mode:"single",selected:r.dueDate,onSelect:e=>V("dueDate",e),initialFocus:!0})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(y.J,{htmlFor:"assignedTo",children:"Assigned To (User ID)"}),(0,t.jsxs)(h.l6,{value:r.assignedTo,onValueChange:e=>P({target:{name:"assignedTo",value:e}}),children:[(0,t.jsx)(h.bq,{id:"assignedTo",className:"w-full",children:(0,t.jsx)(h.yv,{placeholder:"Select a user"})}),(0,t.jsx)(h.gC,{children:A.map(e=>(0,t.jsx)(h.eb,{value:e._id,children:e.name},e._id))})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(y.J,{htmlFor:"tags",className:"block mb-2",children:"Tags"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:N.map(e=>(0,t.jsxs)(j.E,{variant:"secondary",className:"px-3 py-1",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>I(e),className:"ml-2 text-gray-500 hover:text-gray-700",children:(0,t.jsx)(n.A,{className:"h-3 w-3"})})]},e))}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.p,{id:"tagInput",value:T,onChange:e=>k(e.target.value),placeholder:"Add a tag",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),q())},className:"flex-1"}),(0,t.jsx)(d.$,{type:"button",variant:"outline",onClick:q,children:"Add"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(m.d,{checked:w,onCheckedChange:D,id:"recurring-task"}),(0,t.jsx)(y.J,{htmlFor:"recurring-task",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Recurring Task"})]}),w&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pl-6 border-l-2 border-gray-200",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(y.J,{htmlFor:"recurringType",className:C.recurringType?"text-red-500":"",children:"Recurrence Pattern"}),(0,t.jsxs)(h.l6,{value:r.recurringType,onValueChange:e=>_("recurringType",e),disabled:!w,children:[(0,t.jsx)(h.bq,{className:C.recurringType?"border-red-500":"",children:(0,t.jsx)(h.yv,{placeholder:"Select type"})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"daily",children:"Daily"}),(0,t.jsx)(h.eb,{value:"weekly",children:"Weekly"}),(0,t.jsx)(h.eb,{value:"monthly",children:"Monthly"})]})]}),C.recurringType&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:C.recurringType})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(y.J,{htmlFor:"recurringEndDate",children:"End Date"}),(0,t.jsxs)(x.AM,{children:[(0,t.jsx)(x.Wv,{asChild:!0,children:(0,t.jsxs)(d.$,{variant:"outline",className:"w-full justify-start text-left font-normal",disabled:!w,children:[(0,t.jsx)(i.A,{className:"mr-2 h-4 w-4"}),r.recurringEndDate?M(r.recurringEndDate):(0,t.jsx)("span",{className:"text-gray-400",children:"Pick a date"})]})}),(0,t.jsx)(x.hl,{className:"w-auto p-0",children:(0,t.jsx)(g.V,{mode:"single",selected:r.recurringEndDate,onSelect:e=>V("recurringEndDate",e),initialFocus:!0,disabled:!w})})]})]})]})]})]})]}),(0,t.jsxs)(u.wL,{className:"flex justify-end",children:[(0,t.jsx)(d.$,{type:"button",variant:"outline",className:"mr-2",children:"Cancel"}),(0,t.jsx)(d.$,{onClick:$,disabled:e,children:e?"Creating...":"Create Task"})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[464,460,161,271,591,631,149,441,684,358],()=>s(5405)),_N_E=e.O()}]);